# ============================================
# Polymarket Copy Trader - Unified Configuration
# ============================================

system:
  read_only_mode: true
  force_read_only: true

monitoring:
  mode: "websocket"       # websocket for real-time ~0 latency detection
  poll_interval: 1        # fallback if websocket fails
  max_concurrent: 5       # max concurrent API requests
  retry_on_error: true
  max_retries: 3

simulation:
  delays: [0, 1]          # Remove 3s delay - too slow for 5-15min markets
  investment_per_trade: 100.0
  fee_rate: 0.015         # 1.5%
  enable_slippage_check: true
  max_slippage_pct: 5.0   # Reject simulations with >5% slippage (VWAP-based)

market_filter:
  enabled: true
  assets:
    - "BTC"
    - "ETH"
    - "Bitcoin"
    - "Ethereum"
  min_duration_minutes: 5  # Keep 5min to allow short-term markets
  max_duration_minutes: 120  # Expand to 2 hours for more market coverage
  keywords:
    - "up"
    - "down"
    - "higher"
    - "lower"
    - "rise"
    - "fall"
    - "above"
    - "below"
  exclude_keywords:
    - "week"
    - "month"
    - "year"
    - "annual"

targets:
  - address: "0x88f46b9e5d86b4fb85be55ab0ec4004264b9d4db"
    nickname: "PBot1"
    active: true
    weight: 1.0

api:
  base_urls:
    gamma: "https://gamma-api.polymarket.com"
    clob: "https://clob.polymarket.com"
    data: "https://data-api.polymarket.com"
  websocket_urls:
    market: "wss://ws-subscriptions-clob.polymarket.com/ws/market"
    user: "wss://ws-subscriptions-clob.polymarket.com/ws/user"
  timeout: 30
  rate_limit:
    max_requests: 100
    time_window: 60
    burst_size: 10

notifications:
  enabled: true
  aggregation_interval: 30   # seconds between aggregated sends
  max_retries: 3
  retry_backoff: [1, 2, 4]   # exponential backoff seconds
  telegram:
    enabled: true
    bot_token: "${TELEGRAM_BOT_TOKEN}"
    chat_id: "${TELEGRAM_CHAT_ID}"
    rate_limit: 20
  imessage:
    enabled: false
    phone_number: "${IMESSAGE_PHONE}"

database:
  path: "data/trades.db"
  backup_enabled: true
  backup_interval: 3600
  market_cache_ttl: 3600
  auto_vacuum: true

export:
  enabled: true
  csv_path: "data/exports/"
  auto_export_interval: 3600
  include_headers: true

logging:
  level: "INFO"
  
  # Console display configuration
  console:
    enabled: true
    mode: "live"  # live (single-page refresh) | scroll (traditional) | minimal
    
    # Refresh settings
    refresh_interval: 1.0  # seconds between screen updates
    
    # Layout configuration
    layout:
      sections:
        - system_status      # System status bar
        - dashboard         # Monitoring dashboard
        - recent_trades     # Recent trades table
        - event_stream      # Live event stream
        
      limits:
        recent_trades: 5    # Show last 5 trades
        event_stream: 10    # Show last 10 events
        
    # Color configuration
    colors:
      enabled: true
      scheme: "professional"  # professional | minimal | monochrome
      
    # Event filtering
    events:
      show:
        - system
        - trade
        - simulation
        - notification
        - settlement
        - error
        - warning
      hide:
        - debug
        
  # File logging configuration (background silent recording)
  files:
    main:
      enabled: true
      path: "logs/bot.log"
      level: "INFO"
      format: "structured"
      rotation: "100 MB"
      retention: "30 days"
      
    trades:
      enabled: true
      path: "logs/trades.log"
      level: "INFO"
      format: "table"
      rotation: "50 MB"
      retention: "90 days"
      
    metrics:
      enabled: true
      path: "logs/metrics.json"
      level: "INFO"
      format: "json"
      rotation: "100 MB"
      retention: "7 days"
      interval: 300  # 5 minutes between metric logs
      
    errors:
      enabled: true
      path: "logs/errors.log"
      level: "WARNING"
      format: "detailed"
      rotation: "50 MB"
      retention: "90 days"
